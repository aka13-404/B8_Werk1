[gcode_macro prepare_bed]
gcode:
	G28
	_CONNECT_PROBE_PHASE_I
	Z_TILT_ADJUST
	CALIBRATE_Z

[gcode_macro accel_test]
gcode:
	SET_VELOCITY_LIMIT ACCEL=500										#safe 500 mmsec accel
	{% if printer.toolhead.homed_axes == "" %}
		G28
	{% endif %}
	_DISCONNECT_PROBE_PHASE_I
	G90
	G1 Z50 F12000
	G1 X{ printer.toolhead.axis_minimum.x } Y{ printer.toolhead.axis_minimum.y } F6000
	{% for acceleration in (3000, 4000, 5000, 6000, 7000, 8000, 9000, 10000) %}
		SET_VELOCITY_LIMIT ACCEL={ acceleration } ACCEL_TO_DECEL={ acceleration/2 }
		RESPOND MSG="ACCEL={ acceleration } ACCEL_TO_DECEL={ acceleration/2 } "
		G1 X{ printer.toolhead.axis_maximum.x } Y{ printer.toolhead.axis_maximum.y } F30000 #diagonal move to endstops
		G1 X{ printer.toolhead.axis_maximum.x } Y{ printer.toolhead.axis_minimum.y } F30000 #square move bottom right
		G1 X{ printer.toolhead.axis_minimum.x } Y{ printer.toolhead.axis_minimum.y } F30000	#square move bottom left
		G1 X{ printer.toolhead.axis_minimum.x } Y{ printer.toolhead.axis_maximum.y } F30000	#square move top left
		G1 X{ printer.toolhead.axis_maximum.x } Y{ printer.toolhead.axis_maximum.y } F30000 #square move top right
		G1 X{ printer.toolhead.axis_minimum.x } Y{ printer.toolhead.axis_minimum.y } F30000 #diagonal move to initial position
	{% endfor %}

[gcode_macro DEBUG]
gcode:
	RESPOND MSG="{ printer["gcode_macro _GLOBAL_VARIABLES"].chamber_temp }"
	RESPOND MSG="{ printer["temperature_sensor chamber"].temperature }"

